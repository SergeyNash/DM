# Постановка задачи: Разработка сервиса консолидации отчетов безопасности

## 1. Общее описание

Сервис для консолидации отчетов SAST, DAST и SCA в формате SARIF с единым интерфейсом для анализа и управления уязвимостями.

## 2. Целевая аудитория
- DevSecOps инженеры
- AppSec специалисты  
- Security аналитики
- Разработчики

## 3. Функциональные требования

### 3.1 Управление проектами
**FR-PROJ-001:** Базовое управление проектами
- Создание/удаление проектов
- Список проектов с поиском
- Редактирование названия и описания

**FR-PROJ-002:** Минимальная модель доступа
- Один тип пользователя с полными правами
- No authentication для PoC

### 3.2 Загрузка и обработка отчетов
**FR-UPLOAD-001:** Мультиформатная загрузка SARIF
- Поддержка SAST инструментов (SonarQube, CodeQL, Semgrep)
- Поддержка DAST инструментов (OWASP ZAP, Burp Suite) 
- Поддержка SCA инструментов (Snyk, OWASP Dependency Check, Trivy)
- Пакетная загрузка нескольких файлов
- Максимальный размер файла: 50MB

**FR-UPLOAD-002:** Валидация и парсинг
- Базовая валидация SARIF схемы
- Автоопределение инструмента из tool.driver.name
- Извлечение: ruleId, message, level, locations
- Обработка ошибок парсинга

**FR-UPLOAD-003:** Нормализация данных
```csharp
public enum NormalizedSeverity { Critical, High, Medium, Low, Info }
public enum FindingStatus { New, Confirmed, FalsePositive, Fixed }
```

### 3.3 Просмотр и анализ данных
**FR-VIEW-001:** Единая таблица результатов
- Отображение всех находок из всех инструментов
- Колонки: Серьезность, Инструмент, Правило, Файл, Статус, Дата
- Сортировка по всем колонкам
- Виртуализация для больших наборов данных

**FR-VIEW-002:** Расширенная фильтрация
```csharp
public class FindingsFilter
{
    public string[]? Severities { get; set; }
    public string[]? Tools { get; set; }
    public string[]? Projects { get; set; }
    public string[]? Statuses { get; set; }
    public string? SearchText { get; set; }
}
```

**FR-VIEW-003:** Детальный просмотр
- Полная информация об уязвимости
- Исходный SARIF контент
- История изменений статуса
- Быстрое переключение между находками

### 3.4 Управление жизненным циклом
**FR-MGMT-001:** Система статусов
- Быстрое изменение статуса (1-2 клика)
- Валидация переходов между статусами
- Визуальная индикация статуса (цветовые бейджи)

**FR-MGMT-002:** Базовое комментирование
- Добавление комментариев к уязвимостям
- Простая текстовая модель (без форматирования)

### 3.5 Аналитика и отчетность
**FR-ANALYTICS-001:** Дашборд метрик
- Количество находок по серьезности (pie chart)
- Распределение по инструментам
- Динамика по времени (line chart)
- Статистика по проектам

**FR-ANALYTICS-002:** Экспорт данных
- CSV экспорт таблицы результатов
- JSON экспорт с фильтрами

## 4. UX/UI Требования

### 4.1 Принципы дизайна
- **Единое окно** - вся информация в одном интерфейсе
- **Контекстные действия** - функции рядом с контентом
- **Визуальная приоритизация** - цветовые коды серьезности
- **Прогрессивное раскрытие** - от общего к частному

### 4.2 Ключевые UX-фишки из ASOC решений
**UX-PATTERN-001:** Интеллектуальная группировка
- Дедупликация срабатываний от разных инструментов
- Единая запись для одной уязвимости
- Пометка источников обнаружения

**UX-PATTERN-002:** Умная фильтрация
- Предустановленные фильтры: "Критические", "Новые", "Мои"
- Совместная фильтрация по всем атрибутам
- Быстрый сброс фильтров

**UX-PATTERN-003:** Визуальные индикаторы
- Color-coded severity badges
- Иконки инструментов обнаружения
- Статус индикаторы с иконками

**UX-PATTERN-004:** Быстрые действия
- Bulk operations для массовых изменений
- Keyboard shortcuts для частых операций
- One-click статус изменения

## 5. Технические требования

### 5.1 Архитектура
**TECH-001:** Бэкенд .NET
- ASP.NET Core Web API
- Entity Framework Core
- SQLite для PoC

**TECH-002:** Фронтенд
- React/TypeScript
- Modern CSS framework (Tailwind CSS)
- Chart.js для визуализации

### 5.2 Производительность
**TECH-PERF-001:** Время отклика
- Загрузка отчетов < 30 секунд (50MB)
- Отображение таблицы < 3 секунд (10k+ записей)

**TECH-PERF-002:** Оптимизация
- Виртуализация больших списков
- Background processing для тяжелых операций


## 6. Ограничения PoC

- No authentication/authorization
- Single user модель
- SQLite база данных
- Basic error handling
- Минимальная валидация SARIF
- Локальное хранение файлов

## 7. Критерии успеха

- [ ] Загрузка 3+ различных SARIF отчетов в один проект
- [ ] Консолидированный просмотр всех результатов в единой таблице
- [ ] Фильтрация и поиск по всем атрибутам
- [ ] Изменение статусов уязвимостей
- [ ] Экспорт результатов в CSV
- [ ] Дашборд с визуализацией метрик

## 8. Риски и митигации

**RISK-001:** Производительность с большими отчетами
- Митигация: Виртуализация, пагинация, background processing

**RISK-002:** SARIF compatibility issues
- Митигация: Постепенная поддержка инструментов, extended logging

---
*Документ подготовлен для начала разработки PoC. Требования могут уточняться в процессе реализации.*
